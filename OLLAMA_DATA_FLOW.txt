================================================================================
                    OLLAMA INTEGRATION DATA FLOW
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERFACE (Browser)                             â”‚
â”‚                                                                             â”‚
â”‚  Flight Details Page (localhost:8000/index.html)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Flight: EY129 âš ï¸ DELAYED (60 min)                                   â”‚   â”‚
â”‚  â”‚ Route: DEL â†’ AUH                                                    â”‚   â”‚
â”‚  â”‚ Passengers: 300                                                     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ [ğŸ”„ Rebook] [ğŸ¨ Hotel] [ğŸ’° Compensation] [ğŸ“§ Message]             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ ğŸ¤– Generate AI Suggestions â† USER CLICKS HERE              â”‚   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â†“                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    generateRecommendations() [Line 498]
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JAVASCRIPT (Frontend Processing)                         â”‚
â”‚                                                                             â”‚
â”‚  async function generateRecommendations() {                                 â”‚
â”‚    fetch(API_BASE + '/api/recommendations/generate', {                      â”‚
â”‚      method: 'POST',                                                        â”‚
â”‚      body: { flight_id: 'FLIGHT_EY129' }                                    â”‚
â”‚    })                                                                       â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â”‚  â†“ Sends HTTP Request                                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    HTTP POST Request: localhost:5000
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FLASK BACKEND (app.py)                              â”‚
â”‚                                                                             â”‚
â”‚  @app.route('/api/recommendations/generate', methods=['POST'])  [Line 238]  â”‚
â”‚  def generate_recommendations():                                            â”‚
â”‚      flight_id = request.get_json().get('flight_id')                        â”‚
â”‚      recommendations_data = load_json_file("recommendations.json")          â”‚
â”‚      return jsonify(recommendations_data)                                   â”‚
â”‚                                                                             â”‚
â”‚  â†“ Returns JSON Response                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    JSON Response with AI Suggestions
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JAVASCRIPT (Frontend Display)                            â”‚
â”‚                                                                             â”‚
â”‚  fetchRecommendation(disruptionId) [Line 524]                              â”‚
â”‚  renderRecommendationsModal(data)  [Line 1111]                             â”‚
â”‚                                                                             â”‚
â”‚  â†“ Renders Bootstrap Modal                                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         RECOMMENDATIONS MODAL                               â”‚
â”‚                                                                             â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘          âœˆï¸ AI RECOMMENDATIONS FOR DISRUPTION                         â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘                                                                       â•‘ â”‚
â”‚  â•‘ ğŸ“¢ INITIAL COMMUNICATIONS                                            â•‘ â”‚
â”‚  â•‘   â€¢ Email: "Your flight EY129 has been delayed..."                  â•‘ â”‚
â”‚  â•‘   â€¢ SMS: "Flight update: Delay 60 min"                              â•‘ â”‚
â”‚  â•‘   â€¢ App: Push notification sent                                     â•‘ â”‚
â”‚  â•‘                                                                       â•‘ â”‚
â”‚  â•‘ âœˆï¸ REBOOKING OPTIONS                                                 â•‘ â”‚
â”‚  â•‘   â€¢ EY130 - Depart 23:00, Arrive 07:00 (100 seats)                  â•‘ â”‚
â”‚  â•‘   â€¢ EY131 - Depart 02:30, Arrive 10:30 (85 seats)                   â•‘ â”‚
â”‚  â•‘                                                                       â•‘ â”‚
â”‚  â•‘ ğŸ½ï¸ VOUCHERS                                                          â•‘ â”‚
â”‚  â•‘   â€¢ Meals: $25 per passenger (300 = $7,500)                         â•‘ â”‚
â”‚  â•‘   â€¢ Hotel: $150 per passenger (300 = $45,000)                       â•‘ â”‚
â”‚  â•‘   â€¢ Transport: $50 per passenger (300 = $15,000)                    â•‘ â”‚
â”‚  â•‘                                                                       â•‘ â”‚
â”‚  â•‘ ğŸ’° COMPENSATION                                                       â•‘ â”‚
â”‚  â•‘   â€¢ â‚¬125 per passenger (300 = â‚¬37,500)                              â•‘ â”‚
â”‚  â•‘   â€¢ EU261 Compliance: Yes                                           â•‘ â”‚
â”‚  â•‘                                                                       â•‘ â”‚
â”‚  â•‘ ğŸ”§ OPERATIONAL ACTIONS                                               â•‘ â”‚
â”‚  â•‘   â€¢ Assign ground staff to assist passengers                        â•‘ â”‚
â”‚  â•‘   â€¢ Arrange ground transportation                                   â•‘ â”‚
â”‚  â•‘   â€¢ Coordinate with catering team                                   â•‘ â”‚
â”‚  â•‘                                                                       â•‘ â”‚
â”‚  â•‘ ğŸ’¡ COST OPTIMIZATION                                                 â•‘ â”‚
â”‚  â•‘   â€¢ Use partner airlines: Save $5,000                               â•‘ â”‚
â”‚  â•‘   â€¢ Dynamic voucher allocation: Save $3,500                         â•‘ â”‚
â”‚  â•‘                                                                       â•‘ â”‚
â”‚  â•‘ [ âœ“ Apply All ]  [ Customize ]  [ âœ• Close ]                         â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


================================================================================
                          WHERE OLLAMA IS INVOLVED
================================================================================

The recommendations shown above were GENERATED BY OLLAMA and stored in:
    ğŸ“ test_data/recommendations.json

GENERATION PROCESS (Pre-computed):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  1. System Start
         â†“
  2. recommendation_engine.py is executed
         â†“
  3. For each disruption:
     - Extract disruption data
     - Create JSON schema prompt
     - Send to Ollama: http://localhost:11434/api/generate
     - Model: llama2 (Temperature: 0.0)
     - Ollama processes: ~5-30 seconds
     - Parse JSON response
     - Fallback to rule-based if needed
         â†“
  4. Save to recommendations.json
         â†“
  5. Frontend loads pre-computed recommendations
         â†“
  6. Display in modal


OLLAMA LLM PROCESSING DETAILS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Input Prompt (sent to Ollama):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"You are an airline disruption management assistant. Generate ONLY valid JSON 
output based on this disruption.

Use this schema:
{
    "disruption_id": "string",
    "flight_number": "string",
    "rebooking_options": [...],
    "vouchers": [...],
    "compensation": [...],
    ...
}

Disruption Data:
{
    "disruption_id": "DISR_001",
    "flight_number": "EY129",
    "delay_minutes": 60,
    "affected_passengers": 300,
    "disruption_status": "Delayed",
    "disruption_reason": "Technical issue",
    "origin": "DEL",
    "destination": "AUH"
}"


Ollama Processing:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Model: llama2 (7B parameters)
  Endpoint: http://localhost:11434/api/generate
  Temperature: 0.0 (deterministic)
  Time: ~5-30 seconds
  Stream: False (full response at once)


Ollama Response (JSON):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
    "disruption_id": "DISR_001",
    "flight_number": "EY129",
    "flight_date": "2025-11-27",
    "rebooking_options": [
        {
            "flight_number": "EY130",
            "new_departure_time": "2025-11-27T23:00:00",
            "new_arrival_time": "2025-11-28T07:00:00",
            "passenger_count": 100
        }
    ],
    "vouchers": [
        {"type": "meal", "amount": 50, "currency": "USD", "quantity": 300}
    ],
    "compensation": [
        {"type": "monetary", "amount": 125, "currency": "EUR", "passenger_count": 300}
    ],
    "communications": [
        {
            "channel": "email",
            "recipient_group": "all_affected",
            "message_template": "Your flight EY129 has been delayed..."
        }
    ],
    ...
}


================================================================================
                        ACTIVE SYSTEM COMPONENTS
================================================================================

âœ… OLLAMA SERVICE
   Location: http://localhost:11434
   Status: RUNNING
   Models: llama2 (3.8GB), gpt-oss:20b (13.8GB)
   Used for: Generating AI recommendations

âœ… FLASK BACKEND
   Location: http://localhost:5000
   Status: RUNNING
   Port: 5000
   Used for: Serving API endpoints

âœ… FRONTEND SERVER
   Location: http://localhost:8000
   Status: RUNNING
   Port: 8000
   File: index.html

âœ… RECOMMENDATION ENGINE
   File: recommendation_engine.py
   Purpose: Bridge between disruptions and Ollama LLM
   Status: READY TO USE

âœ… DATA FILES
   recommendations.json: Pre-computed AI suggestions (Ollama-generated)
   detected_disruptions.json: 3 disruptions (EY129, EY245, EY567)
   passengers_data.json: 900 passengers with details
   flights_data.json: Flight information


================================================================================
                          QUICK TEST COMMANDS
================================================================================

1. Verify Ollama Running:
   $ curl http://localhost:11434/api/tags
   
   Output should show: llama2 and gpt-oss:20b models

2. Check Generated Recommendations:
   $ cat test_data/recommendations.json | jq '.recommendations[0]'
   
   Output shows AI-generated suggestion structure

3. Trigger Generation (UI):
   - Open: http://localhost:8000/index.html
   - Click RED flight (disrupted): EY129
   - Click "ğŸ¤– Generate AI Suggestions"
   - Wait 5-30 seconds
   - View modal with AI recommendations

4. Check Recommendation Count:
   $ cat test_data/recommendations.json | jq '.recommendations | length'
   
   Output: 3 (one per disrupted flight)


================================================================================
